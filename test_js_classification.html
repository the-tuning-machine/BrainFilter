<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test Classification JS</title>
</head>
<body>
  <h1>Test de classification JavaScript</h1>
  <div id="results"></div>

  <script src="extension/classifier.js"></script>
  <script>
    (async function() {
      const results = document.getElementById('results');

      // Charger le modèle
      await classifier.loadModel();

      // Tester avec des titres
      const testTitles = [
        "Incroyable astuce #shorts",
        "Wait for it... #shorts",
        "POV: Tu es étudiant #shorts",
        "Minecraft gameplay FR #1",
        "TOP 10 FAILS COMPILATION",
        "SQUAT - Technique parfaite",
        "Les dérivées expliquées simplement"
      ];

      console.log("--- Test de classification JS ---");
      for (const title of testTitles) {
        const prediction = classifier.predict(title);
        console.log(`${title} → ${prediction.category} (score: ${prediction.score.toFixed(2)})`);
        results.innerHTML += `<p>${title} → <strong>${prediction.category}</strong> (score: ${prediction.score.toFixed(2)})</p>`;
      }

      // Tester le filtrage
      console.log("\n--- Test de filtrage (heure actuelle) ---");
      const currentHour = new Date().getHours();
      console.log(`Heure actuelle: ${currentHour}h`);

      for (const title of testTitles) {
        const shouldFilter = await classifier.shouldFilter(title, currentHour);
        const prediction = classifier.predict(title);
        console.log(`${title} → ${prediction.category} → Filtrer: ${shouldFilter}`);
      }
    })();
  </script>
</body>
</html>
